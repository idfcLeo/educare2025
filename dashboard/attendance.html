<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Attendance - Educare</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="flex min-h-screen">
        <!-- Sidebar Placeholder -->
        <div id="sidebar-placeholder"></div>

        <!-- Main Content -->
        <main class="flex-1 p-8">
            <header class="flex justify-between items-center mb-8">
                <h1 class="text-2xl font-bold text-gray-700">Attendance</h1>
                <div class="font-semibold text-gray-600">School Year 2024 - 2025</div>
            </header>
            
            <!-- Attendance Cards -->
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6 mb-10">
                <!-- Card Template -->
                <div class="dashboard-card text-center" data-subject="Engineering Graphics" data-attended="12" data-total="14"></div>
                <div class="dashboard-card text-center" data-subject="Mathematical Engineering" data-attended="27" data-total="29"></div>
                <div class="dashboard-card text-center" data-subject="Computer Architecture" data-attended="27" data-total="30"></div>
                <div class="dashboard-card text-center" data-subject="Database Management" data-attended="24" data-total="25"></div>
                <div class="dashboard-card text-center" data-subject="Network Security" data-attended="25" data-total="27"></div>
            </div>

            <!-- Today's Timetable -->
            <div class="dashboard-card">
                 <h2 class="text-xl font-bold text-gray-700 mb-4">Today's Timetable</h2>
                 <div class="overflow-x-auto">
                    <table class="w-full text-left">
                        <thead>
                            <tr class="border-b-2 border-gray-200 text-gray-500">
                                <th class="py-2 px-4">Time</th>
                                <th class="py-2 px-4">Room No.</th>
                                <th class="py-2 px-4">Subject</th>
                                <th class="py-2 px-4">Type</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b border-gray-100">
                                <td class="py-3 px-4">10-11 AM</td>
                                <td class="py-3 px-4">B3-309</td>
                                <td class="py-3 px-4 font-semibold">Database Management</td>
                                <td class="py-3 px-4">Lecture</td>
                            </tr>
                             <tr class="border-b border-gray-100">
                                <td class="py-3 px-4">11-12 AM</td>
                                <td class="py-3 px-4">C2-201</td>
                                <td class="py-3 px-4 font-semibold">Computer Architecture</td>
                                <td class="py-3 px-4">Lecture</td>
                            </tr>
                             <tr>
                                <td class="py-3 px-4">01-02 PM</td>
                                <td class="py-3 px-4">LAB-105</td>
                                <td class="py-3 px-4 font-semibold">Network Security</td>
                                <td class="py-3 px-4">Practical</td>
                            </tr>
                        </tbody>
                    </table>
                 </div>
            </div>
        </main>
    </div>
    
    <script src="../assets/js/include.js"></script>
    <script src="../assets/js/student.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const subjectColors = {
                "Engineering Graphics": "text-blue-500",
                "Mathematical Engineering": "text-red-500",
                "Computer Architecture": "text-green-500",
                "Database Management": "text-purple-500",
                "Network Security": "text-gray-700"
            };
            
            const subjectIcons = {
                "Engineering Graphics": "fas fa-drafting-compass",
                "Mathematical Engineering": "fas fa-calculator",
                "Computer Architecture": "fas fa-microchip",
                "Database Management": "fas fa-database",
                "Network Security": "fas fa-shield-alt"
            };

            const cards = document.querySelectorAll('.dashboard-card[data-subject]');
            cards.forEach(card => {
                const subject = card.dataset.subject;
                const attended = parseInt(card.dataset.attended);
                const total = parseInt(card.dataset.total);
                const percentage = Math.round((attended / total) * 100);

                const colorClass = subjectColors[subject] || 'text-gray-500';
                const iconClass = subjectIcons[subject] || 'fas fa-question';

                const radius = 40;
                const circumference = 2 * Math.PI * radius;
                const offset = circumference - (percentage / 100) * circumference;

                card.innerHTML = `
                    <div class="flex items-center justify-center mb-3">
                        <i class="${iconClass} ${colorClass} text-xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-700 text-sm leading-tight">${subject}</h3>
                    <p class="text-xs text-gray-500 mt-1">${attended}/${total}</p>
                    <div class="relative w-24 h-24 mx-auto my-3">
                        <svg class="w-full h-full" viewBox="0 0 100 100">
                            <!-- Background circle -->
                            <circle class="text-gray-200" stroke-width="8" stroke="currentColor" fill="transparent" r="${radius}" cx="50" cy="50" />
                            <!-- Progress circle -->
                            <circle class="progress-ring__circle--progress ${colorClass}" stroke-width="8" stroke-linecap="round" stroke="currentColor" fill="transparent" r="${radius}" cx="50" cy="50"
                                style="stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference};"
                                data-offset="${offset}"
                            />
                        </svg>
                        <span class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-xl font-bold text-gray-700">${percentage}%</span>
                    </div>
                    <p class="text-xs text-gray-400">Last 24 Hours</p>
                `;
            });
            
            // Trigger the animation after a short delay to ensure it's visible
            setTimeout(() => {
                document.querySelectorAll('.progress-ring__circle--progress').forEach(circle => {
                    circle.style.strokeDashoffset = circle.dataset.offset;
                });
            }, 100);
        });
    </script>
</body>
</html>

